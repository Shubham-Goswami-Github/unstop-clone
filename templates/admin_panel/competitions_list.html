{% extends "admin_panel/admin_base.html" %}
{% block content %}

<!-- Bootstrap & Font Awesome -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">

<style>
  .table-wrapper {
    background-color: #fff;
    border-radius: 12px;
    box-shadow: 0 0 15px rgba(0,0,0,0.08);
    overflow: hidden;
  }

  .table thead th {
    background-color: #0b162a;
    color: #fff;
    border: none;
  }

  .table tbody td {
    background-color: #fdfdfd;
  }

  .table td, .table th {
    vertical-align: middle;
    padding: 14px 12px;
  }

  .table tr:last-child td {
    border-bottom: none;
  }

  .btn-warning {
    background-color: #0c10cf;
    border: none;
  }

  .btn-warning:hover {
    background-color: #250f85;
  }

  .action-icons i {
    transition: all 0.2s ease-in-out;
    cursor: pointer;
  }

  .action-icons i:hover {
    transform: scale(1.2);
  }

  .header-title {
    color: #0b162a;
    font-weight: 600;
  }
</style>

<div class="container-fluid px-3">
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h3 class="header-title">
      <i class="fas fa-trophy me-2 text-primary"></i>Competition Listings
    </h3>
    <a href="{% url 'add_competition' %}" class="btn btn-warning btn-sm">
      <i class="fas fa-plus me-1"></i> Add Competition
    </a>
  </div>

  <div class="table-wrapper">
    <div class="table-responsive">
      <table class="table table-bordered table-hover align-middle mb-0">
        <thead>
          <tr>
            <th style="width: 60px;">S.No.</th>
            <th>ID</th>
            <th>Title</th>
            <th>Host Org</th>
            <th>Type</th>
            <th>Mode</th>
            <th>Category</th>
            <th>Fee (₹)</th>
            <th>Reg. Deadline</th>
            <th class="text-center" style="width: 130px;">Actions</th>
          </tr>
        </thead>
        <tbody>
          {% for comp in competitions %}
          <tr>
            <td>{{ forloop.counter }}</td>
            <td>{{ comp.id }}</td>
            <td>{{ comp.title }}</td>
            <td>{{ comp.host_org }}</td>
            <td>{{ comp.competition_type }}</td>
            <td>{{ comp.mode }}</td>
            <td>{{ comp.category }}</td>
            <td>{{ comp.fee_amount }}</td>
            <td>{{ comp.registration_deadline|default:"—" }}</td>
            <td class="action-icons text-center">
              <a href="{% url 'competition_detail' comp.id %}" title="View">
                <i class="fas fa-eye text-primary"></i>
              </a>
              <a href="{% url 'edit_competition' comp.id %}" title="Edit" class="ms-2">
                <i class="fas fa-pen text-success"></i>
              </a>
              <a href="{% url 'delete_competition' comp.id %}" title="Delete" class="ms-2"
                 onclick="return confirm('Are you sure you want to delete this competition?');">
                <i class="fas fa-trash text-danger"></i>
              </a>
            </td>
          </tr>
          {% empty %}
          <tr>
            <td colspan="10" class="text-center text-muted">No competitions available.</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
</div>

{% endblock %}
