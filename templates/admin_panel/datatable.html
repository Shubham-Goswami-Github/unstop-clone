{% load static %}

<div class="card shadow mb-4">
    <div class="card-header bg-white fw-bold d-flex justify-content-between align-items-center border-bottom">
        <div><i class="fas fa-table me-2 text-dark"></i> Internship Listings</div>
        <span class="badge bg-primary text-white">{{ internships|length }} Total</span>
    </div>
    <div class="card-body p-0">
        <div class="table-responsive p-3">
            <table id="customDataTable" class="table table-bordered table-hover align-middle mb-0">
                <thead class="text-center align-middle bg-white border-bottom">
                    <tr class="text-dark fw-semibold">
                        <th><i class="fas fa-hashtag"></i></th>
                        <th>ID</th>
                        <th><i class="fas fa-briefcase me-1"></i> Title</th>
                        <th><i class="fas fa-building me-1"></i> Company</th>
                        <th><i class="fas fa-code me-1"></i> Domain</th>
                        <th><i class="fas fa-laptop me-1"></i> Mode</th>
                        <th><i class="fas fa-layer-group me-1"></i> Category</th>
                        <th><i class="fas fa-money-bill-wave me-1"></i> Stipend</th>
                        <th><i class="fas fa-clock me-1"></i> Duration</th>
                        <th><i class="fas fa-map-marker-alt me-1"></i> Location</th>
                        <th><i class="fas fa-cogs me-1"></i> Actions</th>
                    </tr>
                </thead>
                <tbody>
                    {% for internship in internships %}
                    <tr class="text-center">
                        <td>{{ forloop.counter }}</td>
                        <td>{{ internship.id }}</td>
                        <td>{{ internship.title }}</td>
                        <td>{{ internship.company_name }}</td>
                        <td>{{ internship.domain }}</td>
                        <td>{{ internship.mode }}</td>
                        <td>{{ internship.category }}</td>
                        <td>â‚¹{{ internship.stipend_amount }}</td>
                        <td>{{ internship.duration_weeks }} weeks</td>
                        <td>{{ internship.location }}</td>
                        <td>
                            <a href="{% url 'edit_internship' internship.id %}" data-bs-toggle="tooltip" title="Edit Internship">
                                <i class="fas fa-pen me-2" style="color: #333;"></i>
                            </a>
                            <a href="{% url 'delete_internship' internship.id %}" data-bs-toggle="tooltip" title="Delete Internship" onclick="return confirm('Are you sure you want to delete this internship?')">
                                <i class="fas fa-trash" style="color: #333;"></i>
                            </a>
                        </td>
                    </tr>
                    {% empty %}
                    <tr>
                        <td colspan="11" class="text-center text-muted">No internships available.</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
</div>

<!-- Simple DataTables CSS & JS -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/simple-datatables@7.1.2/dist/style.css">
<script src="https://cdn.jsdelivr.net/npm/simple-datatables@7.1.2" crossorigin="anonymous"></script>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    const table = document.querySelector("#customDataTable");
    if (table) {
      const dataTable = new simpleDatatables.DataTable(table, {
        perPage: 5,
        perPageSelect: [5, 8, 10, 20, 50],
        searchable: true,
        fixedHeight: false,
        labels: {
          perPage: "", // removed "{select} entries per page"
          noRows: "No entries to display",
          info: "Showing {start} to {end} of {rows} entries",
        }
      });
    }

    // Bootstrap tooltips
    const tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'))
    tooltipTriggerList.map(function (tooltipTriggerEl) {
      return new bootstrap.Tooltip(tooltipTriggerEl)
    })
  });
</script>

<style>
    #customDataTable tbody tr:hover {
        background-color: #f9f9f9;
        transition: 0.2s ease-in-out;
    }

    #customDataTable td,
    #customDataTable th {
        vertical-align: middle;
    }

    .dataTable-selector,
    .dataTable-input {
        padding: 0.375rem 0.75rem;
        border-radius: 0.375rem;
        border: 1px solid #ced4da;
        margin-right: 1rem;
    }

    .dataTable-top {
        padding: 0.75rem 0.75rem;
        display: flex;
        justify-content: space-between;
        align-items: center;
    }

    .dataTable-top label {
        margin-bottom: 0;
    }

    .dataTable-dropdown label,
    .dataTable-search label {
        font-weight: 500;
        color: #444;
    }
</style>
