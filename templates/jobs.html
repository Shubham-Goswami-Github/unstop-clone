{% extends "navbar.html" %}
{% load static %}
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">

{% block content %}
<style>
/* ===== hero + layout ===== */
.hero-section{display:flex;justify-content:center;align-items:center;padding:50px 60px;background:#f8f9fa;gap:40px;flex-wrap:wrap}
.hero-text{flex:1;max-width:500px}
.hero-text h1{font-size:3.5rem;font-weight:700}
.hero-text .unlock{background:#003366;color:#fff;padding:5px 15px;border-radius:5px}
.hero-text .opportunities{color:#003366;margin-left:10px}
.hero-image{flex:1;display:flex;justify-content:flex-end}
.hero-image img{max-width:400px;border-radius:10px;width:100%}
.filter-section{padding:30px 10px;background:#fff}
.filter-buttons-group{display:flex;flex-wrap:wrap;justify-content:center;gap:15px;margin-bottom:10px}
.filter-buttons-group button{background:#003366;color:#fff;border:none;padding:10px 25px;border-radius:6px;font-weight:500;cursor:pointer;transition:.3s}
.filter-buttons-group button.active{background:#0056b3;transform:scale(1.08)}
.cards-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:30px;padding:40px 20px;max-width:1200px;margin:auto}
.banner-card{background:#fff;border-radius:12px;padding:25px 20px;box-shadow:0 4px 12px rgba(0,0,0,.1);display:flex;flex-direction:column;align-items:center;text-align:center;transition:.3s;border:1px solid transparent}
.banner-card:hover{transform:translateY(-8px);box-shadow:0 8px 24px rgba(0,0,0,.15);border-color:#00336630}
.banner-card .icon{font-size:45px;margin-bottom:15px;color:#003366;transition:.4s}
.banner-card:hover .icon{transform:scale(1.2) rotate(10deg)}
.banner-card h5{font-weight:600;font-size:1.2rem;margin-bottom:5px}
.banner-card p{font-size:.9rem;color:#555;margin:0}
.view-btn{margin-top:15px}
.view-btn:hover{background:#003366;color:#fff}
@media(max-width:576px){.filter-buttons-group{flex-direction:column;gap:10px}}
</style>

<!-- ===== Hero ===== -->
<div class="hero-section">
  <div class="hero-text">
    <h1><span class="unlock">UNLOCK</span><span class="opportunities">AMBITION</span></h1>
  </div>
  <div class="hero-image">
    <img src="{% static 'images/J1.webp' %}" alt="Hero">
  </div>
</div>

<!-- ===== Filters ===== -->
<div class="filter-section">
  <!-- Category buttons -->
  <div class="filter-buttons-group">
    <button id="allBtn"           onclick="setCat('all')" class="active">Show All</button>
    <button id="humanBtn"         onclick="setCat('Human Resources')">Human Resources</button>
    <button id="softwareBtn"      onclick="setCat('Software Development')">Software Development</button>
    <button id="marketingBtn"     onclick="setCat('Marketing')">Marketing</button>
    <button id="operationsBtn"    onclick="setCat('Operations')">Operations</button>
    <button id="financeBtn"       onclick="setCat('Finance')">Finance</button>
  </div>
  <!-- Employment‑type buttons -->
  <div class="filter-buttons-group">
    <button id="Full-timeBtn"  onclick="setType('Full-time')">Full‑time</button>
    <button id="Part-timeBtn"  onclick="setType('Part-time')">Part‑time</button>
    <button id="ContractBtn"   onclick="setType('Contract')">Contract</button>
    <button id="InternshipBtn" onclick="setType('Internship')">Internship</button>
  </div>
</div>

<!-- ===== Job cards ===== -->
<div class="cards-grid" id="jobCards">
  {% for job in jobs %}
  <div class="banner-card" data-cat="{{ job.category }}" data-type="{{ job.employment_type }}">
    <i class="fas fa-briefcase icon"></i>
    <h5>{{ job.title|truncatechars:40 }}</h5>
    <p><strong>{{ job.company_name }}</strong></p>
    <span class="badge bg-secondary">{{ job.domain }}</span>
    <p class="mt-2 small">{{ job.employment_type }} • {{ job.category }}{% if job.salary_min_lpa %} • ₹{{ job.salary_min_lpa }}‑{{ job.salary_max_lpa }} LPA{% endif %}</p>
    <a href="{% url 'user_job_detail' job.id %}" class="btn btn-sm btn-outline-primary view-btn">View Details</a>
  </div>
  {% empty %}
    <p class="text-center text-muted">No jobs available.</p>
  {% endfor %}
</div>

<!-- ===== JS ===== -->
<script>
let cat=null, typ=null;

function toggleActive(id, group){
  document.querySelectorAll(group).forEach(b=>b.classList.remove('active'));
  document.getElementById(id)?.classList.add('active');
}

function setCat(c){
  cat = (c==='all')?null:c;
  const idMap={
    'all':'allBtn',
    'Human Resources':'humanBtn',
    'Software Development':'softwareBtn',
    'Marketing':'marketingBtn',
    'Operations':'operationsBtn',
    'Finance':'financeBtn'
  };
  toggleActive(idMap[c]||'allBtn','.filter-section .filter-buttons-group:first-child button');
  apply();
}
function setType(t){
  typ = (typ===t)?null:t;   // toggle
  toggleActive(t+'Btn','.filter-section .filter-buttons-group:last-child button');
  apply();
}

function apply(){
  let visible=0;
  document.querySelectorAll('.banner-card').forEach(card=>{
    const show = (!cat||card.dataset.cat===cat)&&(!typ||card.dataset.type===typ);
    card.style.display = show?'flex':'none';
    if(show) visible++;
  });
  document.getElementById('jobCards').style.justifyContent = (visible===1)?'center':'initial';
}
window.addEventListener('load',apply);
</script>

<body>
  <!-- content -->
  
  <div class="bottom-footer-wrapper">
    {% include 'bottom_menu.html' %}
  </div>

  <style>
    footer.bg-footer {
      margin-left: calc(-1 * (100vw - 100%)/2);
      margin-right: calc(-1 * (100vw - 100%)/2);
      width: 100vw;
    }
  </style>
</body>

{% endblock %}
